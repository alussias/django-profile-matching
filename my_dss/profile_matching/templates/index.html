{% extends 'partials/navbar.html' %} {% block title %}Dashboard{% endblock %} 
{% block content %} {% load static %} {% load custom_filters %}
<div class="row">
  <div class="col-md-12 grid-margin">
    <div class="row">
      <div class="col-12 col-xl-8 mb-4 mb-xl-0">
        <h3 class="font-weight-bold">Rekrutmen Guru</h3>
        <h6 class="font-weight-normal mb-0">
          Mengajar dengan Hati, Menuntun Masa Depan!
        </h6>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-6 grid-margin stretch-card">
    <div class="card tale-bg">
      <div class="card-people mt-auto">
        <img
          src="{% static 'assets/images/dashboard/people.svg' %}"
          alt="people"
        />
        <div class="weather-info">
          <div class="d-flex">
            <div>
              <h2 class="mb-0 font-weight-normal">
                <i class="icon-sun me-2"></i>
              </h2>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-6 grid-margin transparent">
    <div class="row">
      <div class="col-md-12 mb-4 stretch-card transparent">
        <div class="card bg-success">
          <div class="card-body text-white">
            <p class="mb-4 fs-4 fw-bold">Top 1</p>
            <p class="fs-30 mb-3 lh-sm">
              {{ top1.cagur.nama|default:"Belum Ada" }} (Skor: {{ top1.total_nilai|default:"0" }})
            </p>
            <p class="fs-5">{{ top1.cagur.telp|default:"0" }}</p>
          </div>
        </div>
      </div>
      <div class="col-md-6 mb-4 stretch-card transparent">
        <div class="card card-tale">
          <div class="card-body">
            <p class="mb-4 fs-4 fw-bold">Top 2</p>
            <p class="fs-30 mb-3 lh-sm">
              {{ top2.cagur.nama|default:"Belum Ada" }} (Skor: {{ top2.total_nilai|default:"0" }})
            </p>
            <p class="fs-5">{{ top2.cagur.telp|default:"0" }}</p>
          </div>
        </div>
      </div>
      <div class="col-md-6 mb-4 stretch-card transparent">
        <div class="card card-dark-blue">
          <div class="card-body">
            <p class="mb-4 fs-4 fw-bold">Top 3</p>
            <p class="fs-30 mb-3 lh-sm">
              {{ top3.cagur.nama|default:"Belum Ada" }} (Skor: {{ top3.total_nilai|default:"0" }})
            </p>
            <p class="fs-5">{{ top3.cagur.telp|default:"0" }}</p>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 mb-4 mb-lg-0 stretch-card transparent">
        <div class="card card-light-blue">
          <div class="card-body">
            <p class="mb-4 fs-4 fw-bold">Top 4</p>
            <p class="fs-30 mb-3 lh-sm">
              {{ top4.cagur.nama|default:"Belum Ada" }} (Skor: {{ top4.total_nilai|default:"0" }})
            </p>
            <p class="fs-5">{{ top4.cagur.telp|default:"0" }}</p>
          </div>
        </div>
      </div>
      <div class="col-md-6 stretch-card transparent">
        <div class="card card-light-danger">
          <div class="card-body">
            <p class="mb-4 fs-4 fw-bold">Top 5</p>
            <p class="fs-30 mb-3 lh-sm">
              {{ top5.cagur.nama|default:"Belum Ada" }} (Skor: {{ top5.total_nilai|default:"0" }})
            </p>
            <p class="fs-5">{{ top5.cagur.telp|default:"0" }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-12 grid-margin stretch-card">
    <div class="card position-relative">
      <div class="card-body">
        <div
          id="detailedReports"
          class="carousel slide detailed-report-carousel position-static pt-2"
          data-bs-ride="carousel"
        >
        <div class="carousel-inner">
          <div class="carousel-item active">
              <div class="row">
                  <div class="col-md-12 grid-margin stretch-card">
                      <div class="card">
                          <div class="card-body">
                              <p class="card-title mb-0">{{ kriteria1.nama }}</p>
                              <div class="table-responsive">
                                  <table class="table table-striped table-borderless">
                                      <thead>
                                          <tr>
                                              <th>Sub-Kriteria</th>
                                              <th>Nilai</th>
                                              <th>Ideal State</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          {% for subkriteria1 in sub_kriteria1 %}
                                          <tr>
                                              <td>{{ subkriteria1.desc }}</td>
                                              <td class="font-weight-bold">
                                                  {{ subkriteria1.nilai }}
                                              </td>
                                              <td>
                                                  {% if subkriteria1.selected == 1 %}
                                                  <div class="badge badge-success">Dipilih</div>
                                                  {% endif %}
                                              </td>
                                          </tr>
                                          {% endfor %}
                                      </tbody>
                                  </table>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      
          {% for kriteria in kriteria %}
          <div class="carousel-item">
              <div class="row">
                  <div class="col-md-12 grid-margin stretch-card">
                      <div class="card">
                          <div class="card-body">
                              <p class="card-title mb-0">{{ kriteria.nama }}</p>
                              <div class="table-responsive">
                                  <table class="table table-striped table-borderless">
                                      <thead>
                                          <tr>
                                              <th>Sub-Kriteria</th>
                                              <th>Nilai</th>
                                              <th>Ideal State</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          {% for subkriteria in grouped_sub_kriteria|get_item:kriteria.id %}
                                          <tr>
                                              <td>{{ subkriteria.desc }}</td>
                                              <td class="font-weight-bold">
                                                  {{ subkriteria.nilai }}
                                              </td>
                                              <td>
                                                {% if subkriteria.selected == 1 %}
                                                <div class="badge badge-success">Dipilih</div>
                                                {% endif %}
                                            </td>
                                          </tr>
                                          {% empty %}
                                          <tr>
                                              <td colspan="3">Tidak ada sub-kriteria</td>
                                          </tr>
                                          {% endfor %}
                                      </tbody>
                                  </table>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          {% endfor %}
      </div>
          <a
            class="carousel-control-prev"
            href="#detailedReports"
            role="button"
            data-bs-slide="prev"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          </a>
          <a
            class="carousel-control-next"
            href="#detailedReports"
            role="button"
            data-bs-slide="next"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-12 stretch-card grid-margin">
    <div class="card">
      <div class="card-body">
        <p class="card-title mb-0">Gap</p>
        <div class="table-responsive">
          <table class="table table-borderless">
            <thead>
              <tr>
                <th class="ps-0 pb-2 border-bottom">#</th>
                <th class="border-bottom pb-2">Selisih</th>
                <th class="border-bottom pb-2">Bobot Nilai</th>
                <th class="border-bottom pb-2">Keterangan</th>
              </tr>
            </thead>
            {% for gap in gaps %}
            <tbody>
              <tr>
                <td class="ps-0 pb-0">{{ forloop.counter }}</td>
                <td class="pb-0">
                  <p class="mb-0">{{ gap.gap }}</p>
                </td>
                <td class="pb-0">
                  <p class="mb-0">{{ gap.bobot_nilai }}</p>
                </td>
                <td class="pb-0">
                  <p class="mb-0">{{ gap.keterangan }}</p>
                </td>
              </tr>
            </tbody>
            {% endfor %}
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
